[{"D:\\MyWorks\\SportShop-Web-Frontend\\src\\index.js":"1","D:\\MyWorks\\SportShop-Web-Frontend\\src\\reducers\\index.js":"2","D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\admin\\category\\createCategory.js":"3","D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\product\\showAverageRating.js":"4","D:\\MyWorks\\SportShop-Web-Frontend\\src\\util\\api\\stripe-apis.js":"5","D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\user\\showPaymentInfo.js":"6","D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\user\\history.js":"7","D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\pdf\\invoice.js":"8","D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\admin\\dashboard\\dashboard.js":"9","D:\\MyWorks\\SportShop-Web-Frontend\\src\\util\\api\\admin-apis.js":"10","D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\admin\\orders\\orders.js":"11","D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\nav\\header.js":"12","D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\home\\home.js":"13","D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\shoppingCart\\checkout.js":"14","D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\nav\\footer.js":"15"},{"size":953,"mtime":1616597645039,"results":"16","hashOfConfig":"17"},{"size":483,"mtime":1616947008176,"results":"18","hashOfConfig":"17"},{"size":3992,"mtime":1616597645028,"results":"19","hashOfConfig":"17"},{"size":870,"mtime":1616597645037,"results":"20","hashOfConfig":"17"},{"size":274,"mtime":1617032910527,"results":"21","hashOfConfig":"17"},{"size":1221,"mtime":1617120652165,"results":"22","hashOfConfig":"17"},{"size":2991,"mtime":1617112422852,"results":"23","hashOfConfig":"17"},{"size":2763,"mtime":1617112555350,"results":"24","hashOfConfig":"17"},{"size":1424,"mtime":1617120383744,"results":"25","hashOfConfig":"17"},{"size":491,"mtime":1617115313353,"results":"26","hashOfConfig":"17"},{"size":2445,"mtime":1617120510825,"results":"27","hashOfConfig":"17"},{"size":7193,"mtime":1617127138529,"results":"28","hashOfConfig":"17"},{"size":5000,"mtime":1617123402829,"results":"29","hashOfConfig":"17"},{"size":5916,"mtime":1617122622493,"results":"30","hashOfConfig":"17"},{"size":4776,"mtime":1617123062000,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"ua8vbz",{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"56","messages":"57","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"58","messages":"59","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\MyWorks\\SportShop-Web-Frontend\\src\\index.js",[],"D:\\MyWorks\\SportShop-Web-Frontend\\src\\reducers\\index.js",[],"D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\admin\\category\\createCategory.js",[],"D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\product\\showAverageRating.js",[],"D:\\MyWorks\\SportShop-Web-Frontend\\src\\util\\api\\stripe-apis.js",[],"D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\user\\showPaymentInfo.js",[],"D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\user\\history.js",["63","64","65","66","67","68","69","70","71"],"D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\pdf\\invoice.js",[],"D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\admin\\dashboard\\dashboard.js",["72","73"],"D:\\MyWorks\\SportShop-Web-Frontend\\src\\util\\api\\admin-apis.js",[],"D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\admin\\orders\\orders.js",[],"D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\nav\\header.js",["74","75","76","77","78","79","80","81","82"],"D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\home\\home.js",["83","84","85"],"D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\shoppingCart\\checkout.js",["86","87","88","89"],"import React, { useEffect, useState } from \"react\";\r\nimport { Layout } from 'antd'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { toast } from 'react-toastify'\r\nimport ReactQuill from 'react-quill'\r\nimport AppHeader from '../nav/header';\r\n\r\nimport { getUserCart, emptyUserCart, saveUserAddress, applyCoupon } from '../../util/api/user-apis';\r\n\r\nimport 'antd/dist/antd.css';\r\nimport \"react-quill/dist/quill.snow.css\"\r\n\r\nconst { Header, Content, Footer } = Layout;\r\n\r\nconst CheckOut = ({ history }) => {\r\n    const [products, setProducts] = useState([]);\r\n    const [total, setTotal] = useState(0);\r\n    const [address, setAddress] = useState(\"\");\r\n    const [addressSaved, setAddressSaved] = useState(false);\r\n    const [coupon, setCoupon] = useState(\"\");\r\n\r\n    /* Discount price */\r\n    const [totalAfterDiscount, setTotalAfterDiscount] = useState(0);\r\n    const [discountError, setDiscountError] = useState(\"\");\r\n\r\n    const dispatch = useDispatch();\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n\r\n    useEffect(() => {\r\n        getUserCart(user.token).then(res => {\r\n            console.log(\"user cart res\", JSON.stringify(res.data, null, 4))\r\n            setProducts(res.data.products);\r\n            setTotal(res.data.cartTotal);\r\n        })\r\n    }, [])\r\n\r\n    const saveAddressToDb = () => {\r\n        // console.log(address);\r\n        saveUserAddress(user.token, address).then(res => {\r\n            if (res.data.ok) {\r\n                setAddressSaved(true);\r\n                toast.success(\"address saved\");\r\n            }\r\n        })\r\n    };\r\n\r\n    const emptyCart = () => {\r\n        if (typeof window !== 'undefined') {\r\n            localStorage.removeItem(\"cart\");\r\n        }\r\n\r\n        /* Remove from redux */\r\n        dispatch({\r\n            type: \"ADD_TO_CART\",\r\n            payload: [],\r\n        });\r\n\r\n        /* Remove from backend */\r\n        emptyUserCart(user.token)\r\n            .then(res => {\r\n                setProducts([]);\r\n                setTotal(0);\r\n                setTotalAfterDiscount(0);\r\n                setCoupon(\"\");\r\n                toast.success(\"Cart is empty. Continue shopping.\");\r\n            })\r\n    }\r\n\r\n    const applyDiscountCoupon = () => {\r\n        console.log(\"send coupon to backend\", coupon);\r\n        applyCoupon(user.token, coupon).then((res) => {\r\n            console.log(\"RES ON COUPON APPLIED\", res.data);\r\n            if (res.data) {\r\n                setTotalAfterDiscount(res.data);\r\n                // update redux coupon applied\r\n                dispatch({\r\n                    type: \"COUPON_APPLIED\",\r\n                    payload: true,\r\n                })\r\n            }\r\n            // error\r\n            if (res.data.err) {\r\n                setDiscountError(res.data.err);\r\n                // update redux coupon applied\r\n\r\n                dispatch({\r\n                    type: \"COUPON_APPLIED\",\r\n                    payload: false\r\n                })\r\n            }\r\n        });\r\n    }\r\n\r\n    const showAddress = () => {\r\n        return (\r\n            <>\r\n                <ReactQuill theme=\"snow\" value={address} onChange={setAddress} />\r\n                <button className=\"btn btn-primary mt-2\" onClick={saveAddressToDb}>\r\n                    Save\r\n                </button>\r\n            </>\r\n        )\r\n    }\r\n\r\n    const showProductSummary = () => {\r\n        return products.map((product, index) => {\r\n            return (\r\n                <div key={index}>\r\n                    <p>\r\n                        {product.product.title} ({product.color}) x {product.count} ={\" \"}\r\n                    ${product.product.price * product.count}\r\n                    </p>\r\n                </div>\r\n            )\r\n        })\r\n    }\r\n\r\n    const showApplyCoupon = () => {\r\n        return (\r\n            <>\r\n                <input onChange={(e) => {\r\n                    setCoupon(e.target.value);\r\n                    setDiscountError(\"\");\r\n                }} type=\"text\" className=\"form-control\" value={coupon} />\r\n                <button onClick={applyDiscountCoupon} className=\"btn btn-primary mt-2\">Apply</button>\r\n            </>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <AppHeader />\r\n            <div className=\"row padding\">\r\n                <div className=\"col-md-6\">\r\n                    <h4>Delivery Address</h4>\r\n                    <br />\r\n                    <br />\r\n                    {showAddress()}\r\n                    <hr />\r\n                    <h4>Got Coupon?</h4>\r\n                    <br />\r\n                    {showApplyCoupon()}\r\n                    <br />\r\n                    {discountError && <p className=\"bg-danger p-2\">{discountError}</p>}\r\n                </div>\r\n\r\n                <div className=\"col-md-6\">\r\n                    <h4>Order Summary</h4>\r\n                    <hr />\r\n                    <p>Products {products.length}</p>\r\n                    <hr />\r\n                    {showProductSummary()}\r\n                    <hr />\r\n                    <p>Cart Total: ${total}</p>\r\n                    {totalAfterDiscount > 0 && (\r\n                        <p className=\"bg-success p-2\">\r\n                            Discount Applied: Total Payable: ${totalAfterDiscount}\r\n                        </p>\r\n                    )}\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md-6\">\r\n                            <button className=\"btn btn-primary\" disabled={!addressSaved || !products.length} onClick={() => history.push(\"/payment\")}>Place Order</button>\r\n                        </div>\r\n\r\n                        <div className=\"col-md-6\">\r\n                            <button disabled={!products.length} onClick={emptyCart} className=\"btn btn-primary\">Empty Cart</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default CheckOut;\r\n","D:\\MyWorks\\SportShop-Web-Frontend\\src\\components\\nav\\footer.js",[],{"ruleId":"90","severity":1,"message":"91","line":4,"column":23,"nodeType":"92","messageId":"93","endLine":4,"endColumn":34},{"ruleId":"90","severity":1,"message":"94","line":6,"column":10,"nodeType":"92","messageId":"93","endLine":6,"endColumn":15},{"ruleId":"90","severity":1,"message":"95","line":8,"column":10,"nodeType":"92","messageId":"93","endLine":8,"endColumn":18},{"ruleId":"90","severity":1,"message":"96","line":8,"column":20,"nodeType":"92","messageId":"93","endLine":8,"endColumn":24},{"ruleId":"90","severity":1,"message":"97","line":8,"column":26,"nodeType":"92","messageId":"93","endLine":8,"endColumn":30},{"ruleId":"90","severity":1,"message":"98","line":8,"column":32,"nodeType":"92","messageId":"93","endLine":8,"endColumn":36},{"ruleId":"90","severity":1,"message":"99","line":8,"column":38,"nodeType":"92","messageId":"93","endLine":8,"endColumn":48},{"ruleId":"90","severity":1,"message":"100","line":8,"column":67,"nodeType":"92","messageId":"93","endLine":8,"endColumn":76},{"ruleId":"101","severity":1,"message":"102","line":19,"column":6,"nodeType":"103","endLine":19,"endColumn":8,"suggestions":"104"},{"ruleId":"90","severity":1,"message":"91","line":2,"column":23,"nodeType":"92","messageId":"93","endLine":2,"endColumn":34},{"ruleId":"101","severity":1,"message":"105","line":17,"column":6,"nodeType":"103","endLine":17,"endColumn":8,"suggestions":"106"},{"ruleId":"90","severity":1,"message":"107","line":2,"column":10,"nodeType":"92","messageId":"93","endLine":2,"endColumn":16},{"ruleId":"90","severity":1,"message":"108","line":2,"column":18,"nodeType":"92","messageId":"93","endLine":2,"endColumn":24},{"ruleId":"90","severity":1,"message":"109","line":2,"column":26,"nodeType":"92","messageId":"93","endLine":2,"endColumn":32},{"ruleId":"90","severity":1,"message":"110","line":2,"column":34,"nodeType":"92","messageId":"93","endLine":2,"endColumn":39},{"ruleId":"90","severity":1,"message":"111","line":7,"column":8,"nodeType":"92","messageId":"93","endLine":7,"endColumn":14},{"ruleId":"90","severity":1,"message":"112","line":12,"column":10,"nodeType":"92","messageId":"93","endLine":12,"endColumn":17},{"ruleId":"90","severity":1,"message":"113","line":28,"column":9,"nodeType":"92","messageId":"93","endLine":28,"endColumn":19},{"ruleId":"90","severity":1,"message":"114","line":32,"column":9,"nodeType":"92","messageId":"93","endLine":32,"endColumn":16},{"ruleId":"115","severity":1,"message":"116","line":185,"column":19,"nodeType":"117","endLine":185,"endColumn":31},{"ruleId":"90","severity":1,"message":"118","line":2,"column":38,"nodeType":"92","messageId":"93","endLine":2,"endColumn":44},{"ruleId":"101","severity":1,"message":"119","line":24,"column":8,"nodeType":"103","endLine":24,"endColumn":21,"suggestions":"120"},{"ruleId":"101","severity":1,"message":"121","line":28,"column":8,"nodeType":"103","endLine":28,"endColumn":20,"suggestions":"122"},{"ruleId":"90","severity":1,"message":"123","line":13,"column":9,"nodeType":"92","messageId":"93","endLine":13,"endColumn":15},{"ruleId":"90","severity":1,"message":"124","line":13,"column":17,"nodeType":"92","messageId":"93","endLine":13,"endColumn":24},{"ruleId":"90","severity":1,"message":"125","line":13,"column":26,"nodeType":"92","messageId":"93","endLine":13,"endColumn":32},{"ruleId":"101","severity":1,"message":"126","line":35,"column":8,"nodeType":"103","endLine":35,"endColumn":10,"suggestions":"127"},"no-unused-vars","'useDispatch' is defined but never used.","Identifier","unusedVar","'toast' is defined but never used.","'Document' is defined but never used.","'Page' is defined but never used.","'Text' is defined but never used.","'View' is defined but never used.","'StyleSheet' is defined but never used.","'PDFViewer' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'loadUserOrders'. Either include it or remove the dependency array.","ArrayExpression",["128"],"React Hook useEffect has a missing dependency: 'loadOrders'. Either include it or remove the dependency array.",["129"],"'Anchor' is defined but never used.","'Drawer' is defined but never used.","'Button' is defined but never used.","'Badge' is defined but never used.","'Search' is defined but never used.","'visible' is assigned a value but never used.","'showDrawer' is assigned a value but never used.","'onClose' is assigned a value but never used.","jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","'Layout' is defined but never used.","React Hook useEffect has a missing dependency: 'loadAllProductsArrival'. Either include it or remove the dependency array.",["130"],"React Hook useEffect has a missing dependency: 'loadAllProductsSeller'. Either include it or remove the dependency array.",["131"],"'Header' is assigned a value but never used.","'Content' is assigned a value but never used.","'Footer' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'user.token'. Either include it or remove the dependency array.",["132"],{"desc":"133","fix":"134"},{"desc":"135","fix":"136"},{"desc":"137","fix":"138"},{"desc":"139","fix":"140"},{"desc":"141","fix":"142"},"Update the dependencies array to be: [loadUserOrders]",{"range":"143","text":"144"},"Update the dependencies array to be: [loadOrders]",{"range":"145","text":"146"},"Update the dependencies array to be: [loadAllProductsArrival, pageArrival]",{"range":"147","text":"148"},"Update the dependencies array to be: [loadAllProductsSeller, pageSeller]",{"range":"149","text":"150"},"Update the dependencies array to be: [user.token]",{"range":"151","text":"152"},[765,767],"[loadUserOrders]",[542,544],"[loadOrders]",[1017,1030],"[loadAllProductsArrival, pageArrival]",[1099,1111],"[loadAllProductsSeller, pageSeller]",[1292,1294],"[user.token]"]