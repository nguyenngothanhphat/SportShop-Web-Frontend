[{"/home/thanhphat/SportShop-Web-Frontend/src/serviceWorker.js":"1","/home/thanhphat/SportShop-Web-Frontend/src/config/firebase.js":"2","/home/thanhphat/SportShop-Web-Frontend/src/index.js":"3","/home/thanhphat/SportShop-Web-Frontend/src/reducers/userReducer.js":"4","/home/thanhphat/SportShop-Web-Frontend/src/Routes.js":"5","/home/thanhphat/SportShop-Web-Frontend/src/components/nav/header.js":"6","/home/thanhphat/SportShop-Web-Frontend/src/components/auth/register.js":"7","/home/thanhphat/SportShop-Web-Frontend/src/components/auth/login.js":"8","/home/thanhphat/SportShop-Web-Frontend/src/components/auth/forgotPassword.js":"9","/home/thanhphat/SportShop-Web-Frontend/src/components/auth/registerComplete.js":"10"},{"size":5086,"mtime":1615999062310,"results":"11","hashOfConfig":"12"},{"size":623,"mtime":1616072855972,"results":"13","hashOfConfig":"12"},{"size":923,"mtime":1616072855972,"results":"14","hashOfConfig":"12"},{"size":224,"mtime":1616072855972,"results":"15","hashOfConfig":"12"},{"size":1783,"mtime":1616081572320,"results":"16","hashOfConfig":"12"},{"size":1804,"mtime":1616079692290,"results":"17","hashOfConfig":"12"},{"size":1519,"mtime":1616082515610,"results":"18","hashOfConfig":"12"},{"size":3062,"mtime":1616085681050,"results":"19","hashOfConfig":"12"},{"size":1928,"mtime":1616082369160,"results":"20","hashOfConfig":"12"},{"size":2800,"mtime":1616085442190,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1hs1f98",{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"30","messages":"31","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"41","messages":"42","errorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"43"},"/home/thanhphat/SportShop-Web-Frontend/src/serviceWorker.js",[],"/home/thanhphat/SportShop-Web-Frontend/src/config/firebase.js",[],"/home/thanhphat/SportShop-Web-Frontend/src/index.js",[],"/home/thanhphat/SportShop-Web-Frontend/src/reducers/userReducer.js",[],"/home/thanhphat/SportShop-Web-Frontend/src/Routes.js",["44"],"/home/thanhphat/SportShop-Web-Frontend/src/components/nav/header.js",[],"/home/thanhphat/SportShop-Web-Frontend/src/components/auth/register.js",["45"],"import React, { useState, useEffect } from \"react\";\nimport { useSelector } from 'react-redux';\nimport { auth } from \"../../config/firebase\";\nimport { toast } from \"react-toastify\";\n\nconst Register = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    if (user && user.token) history.push(\"/\");\n  }, [user]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const config = {\n      url: \"http://localhost:4000/register/complete\",\n      handleCodeInApp: true,\n    };\n\n    await auth.sendSignInLinkToEmail(email, config);\n    toast.success(\n      `Email is sent to ${email}. Click the link to complete your registration.`\n    );\n    // save user email in local storage\n    window.localStorage.setItem(\"emailForRegistration\", email);\n    // clear state\n    setEmail(\"\");\n  };\n\n  const registerForm = () => (\n    <form onSubmit={handleSubmit}>\n      <input\n        type=\"email\"\n        className=\"form-control\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n        placeholder=\"Your email\"\n        autoFocus\n      />\n      <br />\n      <button type=\"submit\" className=\"btn btn-raised\">\n        Register\n      </button>\n    </form>\n  );\n\n  return (\n    <div className=\"container p-5\">\n      <div className=\"row\">\n        <div className=\"col-md-6 offset-md-3\">\n          <h4>Register</h4>\n          {registerForm()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;\n","/home/thanhphat/SportShop-Web-Frontend/src/components/auth/login.js",["46"],"/home/thanhphat/SportShop-Web-Frontend/src/components/auth/forgotPassword.js",["47"],"/home/thanhphat/SportShop-Web-Frontend/src/components/auth/registerComplete.js",["48"],"import React, { useState, useEffect } from \"react\";\nimport { auth } from \"../../config/firebase\";\nimport { toast } from \"react-toastify\";\n\nimport { createOrUpdateUser } from '../../util/api/auth-apis';\n\nconst RegisterComplete = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  useEffect(() => {\n    setEmail(window.localStorage.getItem(\"emailForRegistration\"));\n    console.log(window.location.href);\n    console.log(window.localStorage.getItem(\"emailForRegistration\"))\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    /* Validate */\n    if (!email || !password) {\n      toast.error('Email and Password is required');\n      return;\n    }\n    if (password.length < 6) {\n      toast.error('Password must be at least 6 characters long');\n      return;\n    }\n    try {\n      const result = await auth.signInWithEmailLink(email, window.location.href);\n      console.log(\"result\", result);\n      if (result.user.emailVerified) {\n        /* Remove user email for local storage */\n        window.localStorage.removeItem(\"emailForRegistration\");\n        /* Get user id token */\n        let user = auth.currentUser;\n        await user.updatePassword(password);\n        const idTokenResult = await user.getIdTokenResult();\n        /* Redux store */\n        console.log(\"user\", user, \"idTokenResult\", idTokenResult);\n\n        createOrUpdateUser(idTokenResult.token)\n          .then((res) => {\n            dispatch({\n              type: \"LOGGED_IN_USER\",\n              payload: {\n                name: res.data.name,\n                email: res.data.email,\n                token: idTokenResult.token,\n                role: res.data.role,\n                _id: res.data._id,\n              },\n            });\n          })\n          .catch();\n\n        /* Redirect */\n        history.push(\"/\");\n      }\n    } catch (error) {\n      console.log(\"ðŸš€ ~ file: registerComplete.js ~ line 22 ~ handleSubmit ~ error\", error)\n      toast.error(error.message);\n    }\n  };\n\n  const completeRegistrationForm = () => (\n    <form onSubmit={handleSubmit}>\n      <input type=\"email\" className=\"form-control\" value={email} disabled />\n\n      <input\n        type=\"password\"\n        className=\"form-control\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n        placeholder=\"Password\"\n        autoFocus\n      />\n\n      <button type=\"submit\" className=\"btn btn-raised\">\n        Complete Registration\n      </button>\n    </form>\n  );\n\n  return (\n    <div className=\"container p-5\">\n      <div className=\"row\">\n        <div className=\"col-md-6 offset-md-3\">\n          <h4>Register Complete</h4>\n          {completeRegistrationForm()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RegisterComplete;\n",{"ruleId":"49","severity":1,"message":"50","line":35,"column":8,"nodeType":"51","endLine":35,"endColumn":10,"suggestions":"52"},{"ruleId":"49","severity":1,"message":"53","line":12,"column":6,"nodeType":"51","endLine":12,"endColumn":12,"suggestions":"54"},{"ruleId":"49","severity":1,"message":"53","line":20,"column":6,"nodeType":"51","endLine":20,"endColumn":12,"suggestions":"55"},{"ruleId":"49","severity":1,"message":"53","line":13,"column":8,"nodeType":"51","endLine":13,"endColumn":14,"suggestions":"56"},{"ruleId":"57","severity":2,"message":"58","line":43,"column":13,"nodeType":"59","messageId":"60","endLine":43,"endColumn":21},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["61"],"React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.",["62"],["63"],["64"],"no-undef","'dispatch' is not defined.","Identifier","undef",{"desc":"65","fix":"66"},{"desc":"67","fix":"68"},{"desc":"67","fix":"69"},{"desc":"67","fix":"70"},"Update the dependencies array to be: [dispatch]",{"range":"71","text":"72"},"Update the dependencies array to be: [history, user]",{"range":"73","text":"74"},{"range":"75","text":"74"},{"range":"76","text":"74"},[1250,1252],"[dispatch]",[392,398],"[history, user]",[685,691],[461,467]]